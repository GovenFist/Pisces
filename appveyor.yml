version: 1.0.{build}

branches:
  only:
    - master

init:
  - mkdir c:\temp
  - mkdir c:\temp\outgoing
  - mkdir c:\temp\incoming
  - mkdir c:\hydromet
  - mkdir c:\hydromet\outgoing
  - mkdir c:\hydromet\incoming

  

install:
  - cmd: appveyor DownloadFile https://dist.nuget.org/win-x86-commandline/latest/nuget.exe 
  
before_build:
  - cmd: nuget restore Pisces.sln

configuration: Debug
platform: Any CPU 

build:
  project: Pisces.sln
  verbosity: minimal
  
test:
  assemblies:
  - Reclamation.Core.dll
  - Reclamation.TimeSeries.dll
  - HydrometServer.exe
  - RiverwareDMI.exe
  categories:
    except:
    - DatabaseServer
    - DatabaseFile
    - Internal
    
notifications:
- provider: Email
  to:
  - ktarbet@usbr.gov
  - jrocha@usbr.gov
  - blounsbury@usbr.gov
  subject: Windows Build -- With Tests
  on_build_success: false
  on_build_failure: true
  on_build_status_changed: false
